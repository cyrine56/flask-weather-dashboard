<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>MÃ©tÃ©o Dashboard ðŸŒ¤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Font & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    :root{
      --bg: #0b1220;
      --panel: #121a2b;
      --panel-2: #18223a;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --brand: #60a5fa;
      --accent: #facc15;
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:'Roboto',system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: radial-gradient(1200px 600px at 20% -20%, #13203a 0%, transparent 70%) , var(--bg);
      color:var(--text);
      min-height:100vh; display:flex;
    }

    /* Sidebar */
    .sidebar{
      width:90px; padding:22px 0; background: rgba(18,26,43,.9);
      display:flex; flex-direction:column; align-items:center; gap:28px;
      border-right: 1px solid rgba(255,255,255,.06);
    }
    .sidebar .logo{
      width:48px; height:48px; display:grid; place-items:center;
      border-radius:14px; background:linear-gradient(135deg,#1f2b46,#0e1526);
      box-shadow: 0 6px 16px rgba(0,0,0,.35) inset, 0 1px 0 rgba(255,255,255,.06);
    }
    .nav-ico{
      width:44px; height:44px; border-radius:12px; display:grid; place-items:center;
      color:#a7b2c7; cursor:pointer; transition:all .2s ease;
    }
    .nav-ico:hover{ background:#1f2b46; color:#fff }

    /* Layout */
    .main{ flex:1; display:grid; grid-template-columns: 1fr 380px; gap:24px; padding:24px; }
    .left{ display:flex; flex-direction:column; gap:20px; }
    .card{
      background:linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.06);
    }

    /* Search */
    .search{
      display:flex; align-items:center; gap:12px; padding:12px 16px;
    }
    .search form{ flex:1; display:flex; gap:12px; }
    .search input{
      flex:1; background:#0f172a; color:var(--text); border:none; outline:none;
      padding:14px 14px; border-radius:12px; font-size:16px;
    }
    .btn{
      padding:12px 16px; border:none; border-radius:12px; cursor:pointer; font-weight:700;
      background:linear-gradient(135deg,#2563eb,#60a5fa); color:#fff;
    }

    /* Latest searches list */
    .list{ padding:14px; display:flex; flex-direction:column; gap:12px; }
    .item{
      display:grid; grid-template-columns: 56px 1fr auto; align-items:center;
      gap:14px; padding:12px; border-radius:14px; background: rgba(255,255,255,.03);
      transition: all .2s ease; cursor:pointer;
    }
    .item:hover{ background: rgba(255,255,255,.06); }
    .item .meta{ color:var(--muted); font-size:12px; margin-top:2px; }
    .temp{ font-size:20px; font-weight:700; }

    /* Suggestions (small cards) */
    .suggest{ padding:14px; display:grid; grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); gap:12px; }
    .sugg-card{ padding:14px; border-radius:14px; background: rgba(255,255,255,.03); display:flex; align-items:center; gap:10px; }
    .sugg-card .s-temp{ margin-left:auto; font-weight:700; }

    /* Right details */
    .right{ padding:18px; display:flex; flex-direction:column; gap:16px; }
    .city-title{ display:flex; justify-content:space-between; align-items:center; }
    .big-temp{ font-size:56px; font-weight:800; line-height:1; }
    .desc{ color:var(--muted); margin-top:4px; }

    .divider{ height:1px; background:rgba(255,255,255,.08); margin:12px 0; }

    .h-forecast, .d-forecast{
      display:grid; grid-template-columns: repeat(3, 1fr); gap:12px;
    }
    .fc-card{
      padding:12px; border-radius:14px; background: rgba(255,255,255,.03);
      display:flex; flex-direction:column; align-items:center; gap:6px; text-align:center;
    }
    .muted{ color:var(--muted); font-size:12px; }
    .row{ display:flex; justify-content:space-between; gap:8px; }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo"><i class="fa-solid fa-cloud-sun"></i></div>
    <div class="nav-ico" title="Weather"><i class="fa-solid fa-cloud"></i></div>
    <div class="nav-ico" title="Cities"><i class="fa-solid fa-city"></i></div>
    <div class="nav-ico" title="Map"><i class="fa-solid fa-map"></i></div>
    <div class="nav-ico" title="Settings"><i class="fa-solid fa-gear"></i></div>
  </aside>

  <!-- Main -->
  <div class="main">
    <!-- Left column: search + lists -->
    <section class="left">
      <div class="card search">
        <i class="fa-solid fa-magnifying-glass"></i>
        <form method="POST">
          <input type="text" name="city" placeholder="Rechercher une ville..." autocomplete="off" />
          <button class="btn" type="submit">Rechercher</button>
        </form>
      </div>

      <div class="card">
        <div class="list">
          <div style="display:flex; justify-content:space-between; align-items:center; padding:2px 4px;">
            <h3 style="margin:0;">DerniÃ¨res villes</h3>
            <span class="muted">({{ default_weather|length }})</span>
          </div>

          {% for w in default_weather %}
          <div class="item" onclick="document.querySelector('input[name=city]').value='{{ w.city }}'; this.closest('section').previousElementSibling.querySelector('form').submit();">
            <img alt="icon" width="56" height="56" src="https://openweathermap.org/img/wn/{{ w.icon }}@2x.png" />
            <div>
              <div style="font-weight:700;">{{ w.city }}</div>
              <div class="meta">{{ w.time_local }}</div>
            </div>
            <div class="temp">{{ w.temp }}Â°</div>
          </div>
          {% endfor %}
        </div>
      </div>

      <div class="card">
        <div class="suggest">
          {% for w in default_weather %}
          <div class="sugg-card">
            <img alt="icon" width="40" height="40" src="https://openweathermap.org/img/wn/{{ w.icon }}@2x.png" />
            <div>
              <div style="font-weight:700;">{{ w.city }}</div>
              <div class="muted">{{ w.description }}</div>
            </div>
            <div class="s-temp">{{ w.temp }}Â°</div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>

    <!-- Right column: detailed panel -->
    <aside class="card right">
      {% if selected %}
        <div class="city-title">
          <div>
            <h2 style="margin:0">{{ selected.city }}, {{ selected.country }}</h2>
            <div class="desc">Ressentie {{ selected.feels_like }}Â° Â· Vent {{ selected.wind }} m/s Â· HumiditÃ© {{ selected.humidity }}%</div>
          </div>
          <img alt="icon" width="84" height="84" src="https://openweathermap.org/img/wn/{{ selected.icon }}@2x.png" />
        </div>

        <div class="big-temp">{{ selected.temp }}Â°</div>
        <div class="desc">{{ selected.description }}</div>

        <div class="divider"></div>

        <h3 style="margin:4px 0 0">PrÃ©visions aujourd'hui</h3>
        <div class="h-forecast">
          {% for f in hourly %}
          <div class="fc-card">
            <div class="muted">{{ f.time }}</div>
            <img alt="icon" width="56" height="56" src="https://openweathermap.org/img/wn/{{ f.icon }}@2x.png" />
            <div style="font-weight:700">{{ f.temp }}Â°</div>
          </div>
          {% endfor %}
          {% if hourly|length == 0 %}
            <div class="muted">Aucune donnÃ©e horaire.</div>
          {% endif %}
        </div>

        <div class="divider"></div>

        <h3 style="margin:4px 0 0">Sur 3 jours</h3>
        <div class="d-forecast">
          {% for d in daily %}
          <div class="fc-card">
            <div style="font-weight:700">{{ d.weekday }}</div>
            <img alt="icon" width="56" height="56" src="https://openweathermap.org/img/wn/{{ d.icon }}@2x.png" />
            <div class="muted">{{ d.desc }}</div>
            <div class="row"><span>Max</span><span>{{ d.tmax }}Â°</span></div>
            <div class="row"><span>Min</span><span>{{ d.tmin }}Â°</span></div>
          </div>
          {% endfor %}
          {% if daily|length == 0 %}
            <div class="muted">Aucune donnÃ©e quotidienne.</div>
          {% endif %}
        </div>
      {% else %}
        <p>Pas de donnÃ©es Ã  afficher.</p>
      {% endif %}
    </aside>
  </div>
</body>
</html>
